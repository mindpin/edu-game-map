{"version":3,"sources":["map.coffee"],"names":[],"mappings":"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","file":"map.js","sourceRoot":"/source/","sourcesContent":["class Node\r\n  constructor: (@map, data)->\r\n    @id = data.id\r\n    @name = data.name\r\n\r\n    @children = []\r\n    @parents = []\r\n\r\n\r\nclass Relation\r\n  constructor: (@map, data)->\r\n    @parent_id = data.parent\r\n    @child_id = data.child\r\n\r\n    @parent = @map.get_node @parent_id\r\n    @child = @map.get_node @child_id\r\n\r\n    @parent.children.push @child\r\n    @child.parents.push @parent\r\n\r\n\r\nclass Map\r\n  constructor: ->\r\n    @id = null\r\n    @name = null\r\n    @nodes = {}\r\n    @relations = []\r\n    @roots = []\r\n\r\n  load: (url, func)->\r\n    jQuery.getJSON url, (data)=>\r\n      @id = data.id\r\n      @name = data.name\r\n      \r\n      for node_data in data.nodes\r\n        node = new Node(@, node_data)\r\n        @nodes[node.id] = node\r\n\r\n      for relation_data in data.relations\r\n        @relations.push new Relation(@, relation_data)\r\n\r\n      for id, node of @nodes\r\n        @roots.push node if node.parents.length is 0\r\n\r\n      # console.log @nodes, @relations\r\n\r\n      func(@)\r\n\r\n  get_node: (node_id)->\r\n    @nodes[node_id]\r\n\r\n\r\nwindow.GameMap = {\r\n  Node : Node\r\n  Relation : Relation\r\n  Map : Map\r\n}"]}